(()=>{"use strict";var t,e=function(){return e=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},e.apply(this,arguments)},o=function(){function t(t,e){this.baseLink=t,this.options=e}return t.prototype.getResp=function(t,e){var o=t.endpoint,n=void 0===o?"":o,r=t.options,c=void 0===r?{}:r;void 0===e&&(e=function(){console.error("No callback for GET response")}),this.load("GET",n,e,c)},t.prototype.errorHandler=function(t){if(!t.ok)throw 401!==t.status&&404!==t.status||console.log("Sorry, but there is ".concat(t.status," error: ").concat(t.statusText)),Error(t.statusText);return t},t.prototype.makeUrl=function(t,o){void 0===t&&(t={});var n=e(e({},this.options),t),r="".concat(this.baseLink).concat(o,"?");return Object.entries(n).forEach((function(t,e,o){r+="".concat(t[0],"=").concat(t[1],"&")})),r.slice(0,-1)},t.prototype.load=function(t,e,o,n){void 0===n&&(n={}),fetch(this.makeUrl(n,e),{method:t}).then(this.errorHandler).then((function(t){return t.json()})).then((function(t){return o(t)})).catch((function(t){return console.error(t)}))},t}(),n=(t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)},function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)});const r=function(t){function e(){return t.call(this,"https://newsapi.org/v2/",{apiKey:"90228118be09467ea9e989ebd5db5c7b"})||this}return n(e,t),e}(o);var c=function(){var t=function(e,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},t(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();const u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getSources=function(e){t.prototype.getResp.call(this,{endpoint:"sources"},e)},e.prototype.getNews=function(e,o){for(var n=e.target,r=e.currentTarget;n!==r;){if(r&&n.classList.contains("source__item")){var c=n.getAttribute("data-source-id");if(null===c)return;return void(r.getAttribute("data-source")!==c&&(r.setAttribute("data-source",c),t.prototype.getResp.call(this,{endpoint:"everything",options:{sources:c}},o)))}n=n.parentNode}},e}(r);var i=function(){function t(){}return t.prototype.draw=function(t){void 0===t&&(t=[]);var e=t.length>=10?t.filter((function(t,e){return e<10})):t,o=document.createDocumentFragment(),n=document.querySelector("#newsItemTemp"),r=document.querySelector(".news");e.forEach((function(t,e){var r=n.content.cloneNode(!0),c=r.querySelector(".news__item");e%2&&c.classList.add("alt"),r.querySelector(".news__meta-photo").style.backgroundImage="url(".concat(t.urlToImage||"img/news_placeholder.jpg",")"),r.querySelector(".news__meta-author").textContent=t.author||t.source.name,r.querySelector(".news__meta-date").textContent=t.publishedAt.slice(0,10).split("-").reverse().join("-"),r.querySelector(".news__description-title").textContent=t.title,r.querySelector(".news__description-source").textContent=t.source.name,r.querySelector(".news__description-content").textContent=t.description,r.querySelector(".news__read-more a").setAttribute("href","".concat(t.url)),o.append(r)})),r.innerHTML="",r.appendChild(o)},t}();const s=i,a=function(){function t(){}return t.prototype.draw=function(t){void 0===t&&(t=[]);var e=document.createDocumentFragment(),o=document.querySelector("#sourceItemTemp"),n=document.querySelector(".sources");t.forEach((function(t){var n=o.content.cloneNode(!0);n.querySelector(".source__item-name").textContent=t.name,n.querySelector(".source__item").setAttribute("data-source-id","".concat(t.id)),e.append(n)})),n.append(e)},t}();var l,p=function(){function t(){this.news=new s,this.sources=new a}return t.prototype.drawNews=function(t){var e=(null==t?void 0:t.articles)?null==t?void 0:t.articles:[];this.news.draw(e)},t.prototype.drawSources=function(t){var e=(null==t?void 0:t.sources)?null==t?void 0:t.sources:[];this.sources.draw(e)},t}();!function(t){t.Light="light",t.Grape="grape",t.Blue="blue",t.Dark="dark"}(l||(l={}));const d=function(){function t(){}return t.prototype.changeBackgroundColor=function(t){var e=document.querySelector("body"),o=l[t];e.classList.remove("light","grape","blue","dark"),e.classList.add(o)},t}();(new(function(){function t(){this.controller=new u,this.view=new p,this.changeColor=new d}return t.prototype.start=function(){var t=this;document.querySelector(".sources").addEventListener("click",(function(e){return t.controller.getNews(e,(function(e){e&&t.view.drawNews(e)}))})),this.controller.getSources((function(e){e&&t.view.drawSources(e)})),document.querySelector("button.light").addEventListener("click",(function(){t.changeColor.changeBackgroundColor("Light")})),document.querySelector("button.grape").addEventListener("click",(function(){t.changeColor.changeBackgroundColor("Grape")})),document.querySelector("button.blue").addEventListener("click",(function(){t.changeColor.changeBackgroundColor("Blue")})),document.querySelector("button.dark").addEventListener("click",(function(){t.changeColor.changeBackgroundColor("Dark")}))},t}())).start()})();